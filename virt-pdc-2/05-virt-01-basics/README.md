
# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."


## Как сдавать задания

Обязательными к выполнению являются задачи без указания звездочки. Их выполнение необходимо для получения зачета и диплома о профессиональной переподготовке.

Задачи со звездочкой (*) являются дополнительными задачами и/или задачами повышенной сложности. Они не являются обязательными к выполнению, но помогут вам глубже понять тему.

Домашнее задание выполните в файле readme.md в github репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

---

Полная (аппаратная) виртуализация - гипервизор по сути является самой ОС и связывает гостевые ОС с аппаратной частью сервера. Нет ограничения по выбору гостевых ОС. Каждая гостевая ОС использует своё ядро; 

Паравиртуализация - гипервизор является приложением поверх ОС, т.е. разделяет ресурсы с хостовой ОС, и управляет доступом к аппаратным ресурсам за счет модификации ядра гостевой ОС.Нет ограничения по выбору гостевых ОС. Каждая гостевая ОС использует своё ядро; 

Виртуализация на основе ОС - по сути гипервизора нету, ресурсами управляет сама ОС, запускаются изолированные контейнеры с гостевыми ОС, но с типом ядра не отличающимся от хостовой ОС. Если хост Linux, то контейнеры только линух. Если хост Windows,то контейнеры только Windows. Гостевые ОС используют ядро хостовой ОС.

---

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

---

| Условия использования                                      | Организация серверов                           | Причины                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|------------------------------------------------------------|------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Высоконагруженная база данных, чувствительная к отказу     | виртуализация уровня ОС                        | Т.к. распределением ресурсов занимается сама ОС, то производительность будет сравнима с физическим сервером, но можно сделать несколько контейнеров, кластеризовать. Так же ими будет проще управлять/бекапить. Но так же мог бы предложить аппаратную виртуализацию, VMWare VSpherе, хранилище на SSD подключенное по FiberChannel, кластер из нескольких хостов - миграция с хоста на хост в случае отказа активного хоста, бекапирование VM, в том числе инкрементное, быстрая работа на SSD хранилище и довольно таки быстрое поднятие из бекапа. |
| Различные web-приложения                                   | виртуализация уровня ОС или паравиртуализация  | К web-приложениям будет много обращений, нужна хорошая производительность, виртуализация на уровне ОС это обеспечит. При условии что эти веб приложения могут использовать один тип ядра. иначе паравиртуализация.                                                                                                                                                                                                                                                                                                                                    |
| Windows системы для использования бухгалтерским отделом    | паравиртуализация                              | По идее системы будут не высоко нагруженные, т.к. работать будут как клиенты, и не будут хранить каких-то баз. Но может потребоваться разные версии ядер, на практике такое случалось, когда приходилось держать пару машин  Windows 7 из-за спецефического ПО, когда остальные уже были на Windows 10.                                                                                                                                                                                                                                               |
| Системы, выполняющие высокопроизводительные расчеты на GPU | физические сервера или виртуализация уровня ОС | Если расчеты проводятся на одном сервере и не нужно делить доступ, проще поставить физический. Если нужно распределять доступ между разными сервисами, чтобы они не влияли друг на друга и был более быстрый доступ к видео подсистеме, то виртуализация на уровне ОС, т.к. ресурсами управляет ОС, но опять таки зависит от совместимости приложений(Windows/Linux).                                                                                                                                                                                 |       |

Комментарий преподавателя:

>Алексей Федин
> 
>ПРЕПОДАВАТЕЛЬ
> 
>5 мая 2022 23:01
> 
>Добрый день!
> 
>Задание 2
> 
>2.1 тут лучше использовать физические севера. СУБД могут создавать кластеры самостоятельно, без виртуализации.

---

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

---

1. VmWare. Будет наиболее подходящим для данных задач. Имеет обширный список программных продуктов, покрывающий я думаю 99% требований инфраструктуры.
2. KVM. Не смотря на возможные проблемы с I/O, порекомендовал бы его. Пробовал в использовании oVirt, вполне неплохой продукт. С драйверами virtio гостевые ОС работают значительно быстрее.
3. Предложил бы Hyper-V, но т.к. нужен бесплатный то Xen PV или KVM c virtio драйверами.
4. Тут предложу из последнего изученного - Vagrant + VirtualBox, можно быстро поднять настроенные окружения и быть уверенным что при одинаковых конфигурациях, они будут одинаковы у всех тестировщиков. Можно добавить к связке еще Ansible, и в гостевой системе поднимать еще и Docker.

---

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

---

Если проект позволял бы этого избежать, то не создавал бы. На этапе проектирования нужно постараться это исключить. Не за чем плодить разные продукты. Возникли бы проблемы с бекапированием - врядли бы нашлись продукты позволяющие бекапировать и восстанавливать из бекапов прямиком в среду виртуализации от разных производителей. Во вторых мониторинг, скорее всего будет разная его реализация. Проблема поддержки - разные среды виртуализации - больше времени на их поддержку и решение проблем. Так же возможно разное поведение гостевых систем в разных окружениях.

Мне кажется сейчас гетерогенность появляется в гос учреждениях, т.к. идет импортозамещение. Если компания использовала скажем продукты от VmWare, а сейчас ей будет необходимо использовать скажем Брест, Veil или скажем RosaVirtualization, то этой компании нужно мигрировать максимально возможный парк машин в новую среду виртуализации, чтобы снизить риски и проблемы.

---
