# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

---


| Типы сущностей                                                                     | Типы СУБД                 | Пояснение                                                                                                             |
|------------------------------------------------------------------------------------|---------------------------|-----------------------------------------------------------------------------------------------------------------------|
| Электронные чеки в json виде                                                       | Документо-ориентированные | Данные хранятся в виде документов. Каждый документ - данные ключ-значение, связь с другими документами.               |
| Склады и автомобильные дороги для логистической компании                           | Графовые                  | Предположу так. Графовые данные: множество объектов, множество типов связей между ними.                               |
| Генеалогические деревья                                                            | Сетевые                   | Иерархическая сруктура, но в отличие от иерархических БД, сетевой узел может иметь отношения с несколькими объектами. |
| Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации | Ключ-значение             | Сложно выбрать что-то другое, подходит только это.                                                                    |
| Отношения клиент-покупка для интернет-магазина                                     | Реляционные               | Данные хранятся в виде таблиц, отношения между данными реляционные.                                                   |

---

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

---

| Реализация                                                               | CAP | PACELC | Пояснение                                                                                                                                |
|--------------------------------------------------------------------------|-----|--------|------------------------------------------------------------------------------------------------------------------------------------------|
| Данные записываются на все узлы с задержкой до часа (асинхронная запись) | PA  | EL     | Доступность в наличии, задержка есть, консистентность не обеспечена (асинхронная запись), несколько узлов, значит устойчива к разделению |
| При сетевых сбоях, система может разделиться на 2 раздельных кластера    | PA  | PA     | По данному условию можно предположить только такое, ничего не сказано про ошибки.                                                        |
| Система может не прислать корректный ответ или сбросить соединение       | PA  | PA     | Опять таки так же, раз может прислать некорректный ответ, значит нет консистентности.                                                    |



---


## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

---

Мне кажется что не могут, т.к. по ACID обеспечивается согласованность данных, а BASE допускает деградацию части узлов, части транзакций и в итоге данные в ответе могут быть неверные. Противоречат в этом друг другу. 

---

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

---

Redis - key-value БД и имеет механизм pub/sub, используют как брокер сообщений.

Из минусов - Если упадет сам Redis сервер, то данные за последние несколько секунд могут быть потеряны. Этого можно избежать настройкой персистентности данных, которая понизит производительность.
Так же при поднятии Redis будет недоступен, пока не прочтет все данные с диска.

---

---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
